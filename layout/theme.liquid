<!doctype html>
<html class="js" lang="{{ request.locale.iso_code }}">
  <head>
    {% if template == 'page.landing-sidelights' %}
  <meta name="robots" content="noindex, nofollow">
{% endif %}

	{% render 'pandectes-rules' %}
    

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="theme-color" content="">
    <link rel="canonical" href="{{ canonical_url }}">

    {% # CUSTOM FONTS SETTINGS START %}
    <link rel="dns-prefetch" href="https://cdn.shopify.com">
    {{
      'https://cdn.shopify.com/s/files/1/0790/1269/2294/files/orbitron-v31-latin-regular.woff2'
      | preload_tag: as: 'font', crossorigin: 'anonymous'
    }}
    {{
      'https://cdn.shopify.com/s/files/1/0790/1269/2294/files/orbitron-v31-latin-500.woff2'
      | preload_tag: as: 'font', crossorigin: 'anonymous'
    }}
    {{
      'https://cdn.shopify.com/s/files/1/0790/1269/2294/files/orbitron-v31-latin-600.woff2'
      | preload_tag: as: 'font', crossorigin: 'anonymous'
    }}
    {{
      'https://cdn.shopify.com/s/files/1/0790/1269/2294/files/orbitron-v31-latin-700.woff2'
      | preload_tag: as: 'font', crossorigin: 'anonymous'
    }}
    {{
      'https://cdn.shopify.com/s/files/1/0790/1269/2294/files/orbitron-v31-latin-800.woff2'
      | preload_tag: as: 'font', crossorigin: 'anonymous'
    }}
    {{
      'https://cdn.shopify.com/s/files/1/0790/1269/2294/files/orbitron-v31-latin-900.woff2'
      | preload_tag: as: 'font', crossorigin: 'anonymous'
    }}
    {% render 'css-fonts' %}
    {% # CUSTOM FONTS SETTINGS END %}

    {%- if settings.favicon != blank -%}
      <link rel="icon" type="image/png" href="{{ settings.favicon | image_url: width: 32, height: 32 }}">
    {%- endif -%}

    {%- unless settings.type_header_font.system? and settings.type_body_font.system? -%}
      <link rel="preconnect" href="https://fonts.shopifycdn.com" crossorigin>
    {%- endunless -%}

    <title>
      {{ page_title }}
      {%- if current_tags %} &ndash; tagged "{{ current_tags | join: ', ' }}"{% endif -%}
      {%- if current_page != 1 %} &ndash; Page {{ current_page }}{% endif -%}
      {%- unless page_title contains shop.name %} &ndash; {{ shop.name }}{% endunless -%}
    </title>

    {% if page_description %}
      <meta name="description" content="{{ page_description | escape }}">
    {% endif %}

    {% render 'meta-tags' %}

    <script src="{{ 'constants.js' | asset_url }}" defer="defer"></script>
    <script src="{{ 'pubsub.js' | asset_url }}" defer="defer"></script>
    <script src="{{ 'global.js' | asset_url }}" defer="defer"></script>
    {%- if settings.animations_reveal_on_scroll -%}
      <script src="{{ 'animations.js' | asset_url }}" defer="defer"></script>
    {%- endif -%}

    {{ content_for_header }}

    {%- liquid
      assign body_font_bold = settings.type_body_font | font_modify: 'weight', 'bold'
      assign body_font_italic = settings.type_body_font | font_modify: 'style', 'italic'
      assign body_font_bold_italic = body_font_bold | font_modify: 'style', 'italic'
    %}
    <link
          rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/7.0.1/swiper-bundle.min.css"
          integrity="sha512-EXVJEovrGhyARtQsxFq7uBxydTPPAwPaXJk+jol5Y59MXaWTcTrs3ISiy4LVuTFeSQf/Eijxrl6Y7siaoxhB6Q=="
          crossorigin="anonymous"
          referrerpolicy="no-referrer"
        >
    <script
          src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/7.0.1/swiper-bundle.min.js"
          integrity="sha512-sRIpMolH1mH84KE0MOk2DGR+EcopqZBacqrVyxOFrVF2tOncVvahXLx5odSF75Hhhhfsn9HOmXTjOteD9Bjs6g=="
          crossorigin="anonymous"
          referrerpolicy="no-referrer"
    ></script>
    {% style %}
      {{ settings.type_body_font | font_face: font_display: 'swap' }}
      {{ body_font_bold | font_face: font_display: 'swap' }}
      {{ body_font_italic | font_face: font_display: 'swap' }}
      {{ body_font_bold_italic | font_face: font_display: 'swap' }}
      {{ settings.type_header_font | font_face: font_display: 'swap' }}

      {% for scheme in settings.color_schemes -%}
        {% assign scheme_classes = scheme_classes | append: ', .color-' | append: scheme.id %}
        {% if forloop.index == 1 -%}
          :root,
        {%- endif %}
        .color-{{ scheme.id }} {
          --color-background: {{ scheme.settings.background.red }},{{ scheme.settings.background.green }},{{ scheme.settings.background.blue }};
        {% if scheme.settings.background_gradient != empty %}
          --gradient-background: {{ scheme.settings.background_gradient }};
        {% else %}
          --gradient-background: {{ scheme.settings.background }};
        {% endif %}

        {% liquid
          assign background_color = scheme.settings.background
          assign background_color_brightness = background_color | color_brightness
          if background_color_brightness <= 26
            assign background_color_contrast = background_color | color_lighten: 50
          elsif background_color_brightness <= 65
            assign background_color_contrast = background_color | color_lighten: 5
          else
            assign background_color_contrast = background_color | color_darken: 25
          endif
        %}

        --color-foreground: {{ scheme.settings.text.red }},{{ scheme.settings.text.green }},{{ scheme.settings.text.blue }};
        --color-background-contrast: {{ background_color_contrast.red }},{{ background_color_contrast.green }},{{ background_color_contrast.blue }};
        --color-shadow: {{ scheme.settings.shadow.red }},{{ scheme.settings.shadow.green }},{{ scheme.settings.shadow.blue }};
        --color-button: {{ scheme.settings.button.red }},{{ scheme.settings.button.green }},{{ scheme.settings.button.blue }};
        --color-button-text: {{ scheme.settings.button_label.red }},{{ scheme.settings.button_label.green }},{{ scheme.settings.button_label.blue }};
        --color-secondary-button: {{ scheme.settings.background.red }},{{ scheme.settings.background.green }},{{ scheme.settings.background.blue }};
        --color-secondary-button-text: {{ scheme.settings.secondary_button_label.red }},{{ scheme.settings.secondary_button_label.green }},{{ scheme.settings.secondary_button_label.blue }};
        --color-link: {{ scheme.settings.secondary_button_label.red }},{{ scheme.settings.secondary_button_label.green }},{{ scheme.settings.secondary_button_label.blue }};
        --color-badge-foreground: {{ scheme.settings.text.red }},{{ scheme.settings.text.green }},{{ scheme.settings.text.blue }};
        --color-badge-background: {{ scheme.settings.background.red }},{{ scheme.settings.background.green }},{{ scheme.settings.background.blue }};
        --color-badge-border: {{ scheme.settings.text.red }},{{ scheme.settings.text.green }},{{ scheme.settings.text.blue }};
        --payment-terms-background-color: rgb({{ scheme.settings.background.rgb }});
      }
      {% endfor %}

      {{ scheme_classes | prepend: 'body' }} {
        color: rgba(var(--color-foreground), 0.75);
        background-color: rgb(var(--color-background));
      }

      :root {
        --font-body-family: {{ settings.type_body_font.family }}, {{ settings.type_body_font.fallback_families }};
        --font-body-style: {{ settings.type_body_font.style }};
        --font-body-weight: {{ settings.type_body_font.weight }};
        --font-body-weight-bold: {{ settings.type_body_font.weight | plus: 300 | at_most: 1000 }};

        --font-heading-family: {{ settings.type_header_font.family }}, {{ settings.type_header_font.fallback_families }};
        --font-heading-style: {{ settings.type_header_font.style }};
        --font-heading-weight: {{ settings.type_header_font.weight }};

        --font-body-scale: {{ settings.body_scale | divided_by: 100.0 }};
        --font-heading-scale: {{ settings.heading_scale | times: 1.0 | divided_by: settings.body_scale }};

        --media-padding: {{ settings.media_padding }}px;
        --media-border-opacity: {{ settings.media_border_opacity | divided_by: 100.0 }};
        --media-border-width: {{ settings.media_border_thickness }}px;
        --media-radius: {{ settings.media_radius }}px;
        --media-shadow-opacity: {{ settings.media_shadow_opacity | divided_by: 100.0 }};
        --media-shadow-horizontal-offset: {{ settings.media_shadow_horizontal_offset }}px;
        --media-shadow-vertical-offset: {{ settings.media_shadow_vertical_offset }}px;
        --media-shadow-blur-radius: {{ settings.media_shadow_blur }}px;
        --media-shadow-visible: {% if settings.media_shadow_opacity > 0 %}1{% else %}0{% endif %};

        --page-width: {{ settings.page_width | divided_by: 10 }}rem;
        --page-width-margin: {% if settings.page_width == '1600' %}2{% else %}0{% endif %}rem;

        --product-card-image-padding: {{ settings.card_image_padding | divided_by: 10.0 }}rem;
        --product-card-corner-radius: {{ settings.card_corner_radius | divided_by: 10.0 }}rem;
        --product-card-text-alignment: {{ settings.card_text_alignment }};
        --product-card-border-width: {{ settings.card_border_thickness | divided_by: 10.0 }}rem;
        --product-card-border-opacity: {{ settings.card_border_opacity | divided_by: 100.0 }};
        --product-card-shadow-opacity: {{ settings.card_shadow_opacity | divided_by: 100.0 }};
        --product-card-shadow-visible: {% if settings.card_shadow_opacity > 0 %}1{% else %}0{% endif %};
        --product-card-shadow-horizontal-offset: {{ settings.card_shadow_horizontal_offset | divided_by: 10.0 }}rem;
        --product-card-shadow-vertical-offset: {{ settings.card_shadow_vertical_offset | divided_by: 10.0 }}rem;
        --product-card-shadow-blur-radius: {{ settings.card_shadow_blur | divided_by: 10.0 }}rem;

        --collection-card-image-padding: {{ settings.collection_card_image_padding | divided_by: 10.0 }}rem;
        --collection-card-corner-radius: {{ settings.collection_card_corner_radius | divided_by: 10.0 }}rem;
        --collection-card-text-alignment: {{ settings.collection_card_text_alignment }};
        --collection-card-border-width: {{ settings.collection_card_border_thickness | divided_by: 10.0 }}rem;
        --collection-card-border-opacity: {{ settings.collection_card_border_opacity | divided_by: 100.0 }};
        --collection-card-shadow-opacity: {{ settings.collection_card_shadow_opacity | divided_by: 100.0 }};
        --collection-card-shadow-visible: {% if settings.collection_card_shadow_opacity > 0 %}1{% else %}0{% endif %};
        --collection-card-shadow-horizontal-offset: {{ settings.collection_card_shadow_horizontal_offset | divided_by: 10.0 }}rem;
        --collection-card-shadow-vertical-offset: {{ settings.collection_card_shadow_vertical_offset | divided_by: 10.0 }}rem;
        --collection-card-shadow-blur-radius: {{ settings.collection_card_shadow_blur | divided_by: 10.0 }}rem;

        --blog-card-image-padding: {{ settings.blog_card_image_padding | divided_by: 10.0 }}rem;
        --blog-card-corner-radius: {{ settings.blog_card_corner_radius | divided_by: 10.0 }}rem;
        --blog-card-text-alignment: {{ settings.blog_card_text_alignment }};
        --blog-card-border-width: {{ settings.blog_card_border_thickness | divided_by: 10.0 }}rem;
        --blog-card-border-opacity: {{ settings.blog_card_border_opacity | divided_by: 100.0 }};
        --blog-card-shadow-opacity: {{ settings.blog_card_shadow_opacity | divided_by: 100.0 }};
        --blog-card-shadow-visible: {% if settings.blog_card_shadow_opacity > 0 %}1{% else %}0{% endif %};
        --blog-card-shadow-horizontal-offset: {{ settings.blog_card_shadow_horizontal_offset | divided_by: 10.0 }}rem;
        --blog-card-shadow-vertical-offset: {{ settings.blog_card_shadow_vertical_offset | divided_by: 10.0 }}rem;
        --blog-card-shadow-blur-radius: {{ settings.blog_card_shadow_blur | divided_by: 10.0 }}rem;

        --badge-corner-radius: {{ settings.badge_corner_radius | divided_by: 10.0 }}rem;

        --popup-border-width: {{ settings.popup_border_thickness }}px;
        --popup-border-opacity: {{ settings.popup_border_opacity | divided_by: 100.0 }};
        --popup-corner-radius: {{ settings.popup_corner_radius }}px;
        --popup-shadow-opacity: {{ settings.popup_shadow_opacity | divided_by: 100.0 }};
        --popup-shadow-horizontal-offset: {{ settings.popup_shadow_horizontal_offset }}px;
        --popup-shadow-vertical-offset: {{ settings.popup_shadow_vertical_offset }}px;
        --popup-shadow-blur-radius: {{ settings.popup_shadow_blur }}px;

        --drawer-border-width: {{ settings.drawer_border_thickness }}px;
        --drawer-border-opacity: {{ settings.drawer_border_opacity | divided_by: 100.0 }};
        --drawer-shadow-opacity: {{ settings.drawer_shadow_opacity | divided_by: 100.0 }};
        --drawer-shadow-horizontal-offset: {{ settings.drawer_shadow_horizontal_offset }}px;
        --drawer-shadow-vertical-offset: {{ settings.drawer_shadow_vertical_offset }}px;
        --drawer-shadow-blur-radius: {{ settings.drawer_shadow_blur }}px;

        --spacing-sections-desktop: {{ settings.spacing_sections }}px;
        --spacing-sections-mobile: {% if settings.spacing_sections < 24 %}{{ settings.spacing_sections }}{% else %}{{ settings.spacing_sections | times: 0.7 | round | at_least: 20 }}{% endif %}px;

        --grid-desktop-vertical-spacing: {{ settings.spacing_grid_vertical }}px;
        --grid-desktop-horizontal-spacing: {{ settings.spacing_grid_horizontal }}px;
        --grid-mobile-vertical-spacing: {{ settings.spacing_grid_vertical | divided_by: 2 }}px;
        --grid-mobile-horizontal-spacing: {{ settings.spacing_grid_horizontal | divided_by: 2 }}px;

        --text-boxes-border-opacity: {{ settings.text_boxes_border_opacity | divided_by: 100.0 }};
        --text-boxes-border-width: {{ settings.text_boxes_border_thickness }}px;
        --text-boxes-radius: {{ settings.text_boxes_radius }}px;
        --text-boxes-shadow-opacity: {{ settings.text_boxes_shadow_opacity | divided_by: 100.0 }};
        --text-boxes-shadow-visible: {% if settings.text_boxes_shadow_opacity > 0 %}1{% else %}0{% endif %};
        --text-boxes-shadow-horizontal-offset: {{ settings.text_boxes_shadow_horizontal_offset }}px;
        --text-boxes-shadow-vertical-offset: {{ settings.text_boxes_shadow_vertical_offset }}px;
        --text-boxes-shadow-blur-radius: {{ settings.text_boxes_shadow_blur }}px;

        --buttons-radius: {{ settings.buttons_radius }}px;
        --buttons-radius-outset: {% if settings.buttons_radius > 0 %}{{ settings.buttons_radius | plus: settings.buttons_border_thickness }}{% else %}0{% endif %}px;
        --buttons-border-width: {% if settings.buttons_border_opacity > 0 %}{{ settings.buttons_border_thickness }}{% else %}0{% endif %}px;
        --buttons-border-opacity: {{ settings.buttons_border_opacity | divided_by: 100.0 }};
        --buttons-shadow-opacity: {{ settings.buttons_shadow_opacity | divided_by: 100.0 }};
        --buttons-shadow-visible: {% if settings.buttons_shadow_opacity > 0 %}1{% else %}0{% endif %};
        --buttons-shadow-horizontal-offset: {{ settings.buttons_shadow_horizontal_offset }}px;
        --buttons-shadow-vertical-offset: {{ settings.buttons_shadow_vertical_offset }}px;
        --buttons-shadow-blur-radius: {{ settings.buttons_shadow_blur }}px;
        --buttons-border-offset: {% if settings.buttons_radius > 0 or settings.buttons_shadow_opacity > 0 %}0.3{% else %}0{% endif %}px;

        --inputs-radius: {{ settings.inputs_radius }}px;
        --inputs-border-width: {{ settings.inputs_border_thickness }}px;
        --inputs-border-opacity: {{ settings.inputs_border_opacity | divided_by: 100.0 }};
        --inputs-shadow-opacity: {{ settings.inputs_shadow_opacity | divided_by: 100.0 }};
        --inputs-shadow-horizontal-offset: {{ settings.inputs_shadow_horizontal_offset }}px;
        --inputs-margin-offset: {% if settings.inputs_shadow_vertical_offset != 0 and settings.inputs_shadow_opacity > 0 %}{{ settings.inputs_shadow_vertical_offset | abs }}{% else %}0{% endif %}px;
        --inputs-shadow-vertical-offset: {{ settings.inputs_shadow_vertical_offset }}px;
        --inputs-shadow-blur-radius: {{ settings.inputs_shadow_blur }}px;
        --inputs-radius-outset: {% if settings.inputs_radius > 0 %}{{ settings.inputs_radius | plus: settings.inputs_border_thickness }}{% else %}0{% endif %}px;

        --variant-pills-radius: {{ settings.variant_pills_radius }}px;
        --variant-pills-border-width: {{ settings.variant_pills_border_thickness }}px;
        --variant-pills-border-opacity: {{ settings.variant_pills_border_opacity | divided_by: 100.0 }};
        --variant-pills-shadow-opacity: {{ settings.variant_pills_shadow_opacity | divided_by: 100.0 }};
        --variant-pills-shadow-horizontal-offset: {{ settings.variant_pills_shadow_horizontal_offset }}px;
        --variant-pills-shadow-vertical-offset: {{ settings.variant_pills_shadow_vertical_offset }}px;
        --variant-pills-shadow-blur-radius: {{ settings.variant_pills_shadow_blur }}px;
      }

      *,
      *::before,
      *::after {
        box-sizing: inherit;
      }

      html {
        box-sizing: border-box;
        font-size: calc(var(--font-body-scale) * 62.5%);
        height: 100%;
      }

      body {
        display: grid;
        grid-template-rows: auto auto 1fr auto;
        grid-template-columns: 100%;
        min-height: 100%;
        margin: 0;
        font-size: 1.5rem;
        letter-spacing: 0.06rem;
        line-height: calc(1 + 0.8 / var(--font-body-scale));
        font-family: var(--font-body-family);
        font-style: var(--font-body-style);
        font-weight: var(--font-body-weight);
      }

      /*--- POPUP ---*/

      /* Le Popup (caché par défaut) */
      .popup {
        display: flex;
        justify-content: center;
        align-items: center;

        position: fixed; /* Reste en place */
        display: none; /* Caché par défaut */
        z-index: 4; /* Sit on top */
        left: 0;
        top: 0;
        width: 100vw; /* Full width */
        height: 100vh; /* Full height */
        background-color: rgb(0, 0, 0); /* Fallback color */
        background-color: rgba(0, 0, 0, 0.7); /* Black w/ opacity */

        color: #ffffff;

        opacity: 0;
        transition: opacity 0.25s ease-in-out;

      }

      /* Popup Content */
      .popup-content {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;

        background-color: rgba(var(--custom-background-color-rgb), 0.30);
        backdrop-filter: blur(25px);
        -webkit-backdrop-filter: blur(25px);
        border: 1px solid white;
        border-radius: 8px;
        margin: 20px; /* 15% from the top and centered */
        padding: 40px;

        animation: glowing_around 3500ms infinite;
        animation-timing-function: ease;
      }

      /* The Close Button */
      .close {
        color: #aaa;
        float: right;
        font-size: 30px;
        font-weight: bold;
        padding: 5px;
        transform: rotate(0deg);
        transition: transform .3s ease;
      }

      .close:hover,
      .close:focus {
        transform: rotate(180deg);
        cursor: pointer;
      }

      @media screen and (min-width: 750px) {
        body {
          font-size: 1.6rem;
        }
      }
    {% endstyle %}

    {{ 'base.css' | asset_url | stylesheet_tag }}
    {{ 'base-custom.css' | asset_url | stylesheet_tag }}

    {%- unless settings.type_body_font.system? -%}
      {% comment %}theme-check-disable AssetPreload{% endcomment %}
      <link rel="preload" as="font" href="{{ settings.type_body_font | font_url }}" type="font/woff2" crossorigin>
      {% comment %}theme-check-enable AssetPreload{% endcomment %}
    {%- endunless -%}
    {%- unless settings.type_header_font.system? -%}
      {% comment %}theme-check-disable AssetPreload{% endcomment %}
      <link rel="preload" as="font" href="{{ settings.type_header_font | font_url }}" type="font/woff2" crossorigin>
      {% comment %}theme-check-enable AssetPreload{% endcomment %}
    {%- endunless -%}

    {%- if localization.available_countries.size > 1 or localization.available_languages.size > 1 -%}
      {{ 'component-localization-form.css' | asset_url | stylesheet_tag: preload: true }}
      <script src="{{ 'localization-form.js' | asset_url }}" defer="defer"></script>
    {%- endif -%}

    {%- if settings.predictive_search_enabled -%}
      <link
        rel="stylesheet"
        href="{{ 'component-predictive-search.css' | asset_url }}"
        media="print"
        onload="this.media='all'"
      >
    {%- endif -%}

    <script>
      if (Shopify.designMode) {
        document.documentElement.classList.add('shopify-design-mode');
      }
    </script>
  </head>

  {% comment %}------- CUSTOM CODE STARTING - Si template = index (page d'accueil) attribue classe home-page -------{% endcomment %}
  <body class="gradient{% if settings.animations_hover_elements != 'none' %} animate--hover-{{ settings.animations_hover_elements }}{% endif %}{% if template == 'index' %} home-page{% endif %}">
    {% comment %}------- CUSTOM CODE ENDING -------{% endcomment %}

    {% comment %}
      CUSTOM CODE FOR POPUP
      <div id="myPopup" class="popup">
        <div class="popup-content">
          <span class="close" onclick="closePopup()">&times;</span>
          <h2 class="title inline-richtext h1" style="color: white; margin: 10px 0px 0px 0px;">Offre Early Bird</h2>
          <div style="text-align: center; margin-bottom: 30px;">
            Jusqu'à <strong>-40%</strong> lors du lancement sur Kickstarter. <br>
            Inscrivez-vous pour <strong>être averti en avant-première !</strong>
          </div>
          <div id="mc_embed_shell">
            <div id="mc_embed_signup">
              <form
                action="https://sidelights.us17.list-manage.com/subscribe/post?u=c369b9be6a1e182c4ea49abb9&amp;id=1f6aace689&amp;f_id=004a10e0f0"
                method="post"
                id="mc-embedded-subscribe-form"
                name="mc-embedded-subscribe-form"
                class="validate"
                target="_blank"
              >
                <div id="mc_embed_signup_scroll">
                  <div class="mc-field-group" style="display: flex; flex-direction: column;">
                    <div style="text-align: center;">Votre adresse e-mail :</div>
                    <input
                      type="email"
                      name="EMAIL"
                      class="required email"
                      id="mce-EMAIL"
                      required=""
                      value=""
                      style="padding: 12px 20px; border: 1px solid #ccc; border-radius: 4px;"
                    >
                  </div>
                  <div hidden=""><input type="hidden" name="tags" value="8302905"></div>
                  <div id="mce-responses" class="clear">
                    <div class="response" id="mce-error-response" style="display: none;"></div>
                    <div class="response" id="mce-success-response" style="display: none;"></div>
                  </div>
                  <div aria-hidden="true" style="position: absolute; left: -5000px;">
                    <input type="text" name="b_c369b9be6a1e182c4ea49abb9_1f6aace689" tabindex="-1" value="">
                  </div>
                  <div class="clear" style="display: flex; justify-content: center;">
                    <input
                      style="margin: 8px 0; border: 1px solid white; border-radius: 4px;"
                      type="submit"
                      name="subscribe"
                      id="mc-embedded-subscribe"
                      class="button"
                      value="M'INSCRIRE"
                    >
                  </div>
                </div>
              </form>
            </div>
            <script type="text/javascript" src="//s3.amazonaws.com/downloads.mailchimp.com/js/mc-validate.js"></script>
            <script type="text/javascript">
              (function ($) {
                window.fnames = new Array();
                window.ftypes = new Array();
                fnames[0] = 'EMAIL';
                ftypes[0] = 'email';
              })(jQuery);
              var $mcj = jQuery.noConflict(true);
            </script>
          </div>
        </div>
      </div>
    {% endcomment %}

    <a class="skip-to-content-link button visually-hidden" href="#MainContent">
      {{ 'accessibility.skip_to_text' | t }}
    </a>

    {%- if settings.cart_type == 'drawer' -%}
      {%- render 'cart-drawer' -%}
    {%- endif -%}

    {% if page.url != '/pages/earlybird' %}
      {% sections 'header-group' %}
    {% endif %}

    <main id="MainContent" class="content-for-layout focus-none" role="main" tabindex="-1">
      {{ content_for_layout }}
    </main>

    {% if page.url != '/pages/earlybird' %}
      {% sections 'footer-group' %}
    {% endif %}

    <ul hidden>
      <li id="a11y-refresh-page-message">{{ 'accessibility.refresh_page' | t }}</li>
      <li id="a11y-new-window-message">{{ 'accessibility.link_messages.new_window' | t }}</li>
    </ul>

    <script>
      window.shopUrl = '{{ request.origin }}';
      window.routes = {
        cart_add_url: '{{ routes.cart_add_url }}',
        cart_change_url: '{{ routes.cart_change_url }}',
        cart_update_url: '{{ routes.cart_update_url }}',
        cart_url: '{{ routes.cart_url }}',
        predictive_search_url: '{{ routes.predictive_search_url }}',
      };

      window.cartStrings = {
        error: `{{ 'sections.cart.cart_error' | t }}`,
        quantityError: `{{ 'sections.cart.cart_quantity_error_html' | t: quantity: '[quantity]' }}`,
      };

      window.variantStrings = {
        addToCart: `{{ 'products.product.add_to_cart' | t }}`,
        soldOut: `{{ 'products.product.sold_out' | t }}`,
        unavailable: `{{ 'products.product.unavailable' | t }}`,
        unavailable_with_option: `{{ 'products.product.value_unavailable' | t: option_value: '[value]' }}`,
      };

      window.quickOrderListStrings = {
        itemsAdded: `{{ 'sections.quick_order_list.items_added.other' | t: quantity: '[quantity]' }}`,
        itemAdded: `{{ 'sections.quick_order_list.items_added.one' | t: quantity: '[quantity]' }}`,
        itemsRemoved: `{{ 'sections.quick_order_list.items_removed.other' | t: quantity: '[quantity]' }}`,
        itemRemoved: `{{ 'sections.quick_order_list.items_removed.one' | t: quantity: '[quantity]' }}`,
        viewCart: `{{- 'sections.quick_order_list.view_cart' | t -}}`,
        each: `{{- 'sections.quick_order_list.each' | t: money: '[money]' }}`,
        min_error: `{{- 'sections.quick_order_list.min_error' | t: min: '[min]' }}`,
        max_error: `{{- 'sections.quick_order_list.max_error' | t: max: '[max]' }}`,
        step_error: `{{- 'sections.quick_order_list.step_error' | t: step: '[step]' }}`,
      };

      window.accessibilityStrings = {
        imageAvailable: `{{ 'products.product.media.image_available' | t: index: '[index]' }}`,
        shareSuccess: `{{ 'general.share.success_message' | t }}`,
        pauseSlideshow: `{{ 'sections.slideshow.pause_slideshow' | t }}`,
        playSlideshow: `{{ 'sections.slideshow.play_slideshow' | t }}`,
        recipientFormExpanded: `{{ 'recipient.form.expanded' | t }}`,
        recipientFormCollapsed: `{{ 'recipient.form.collapsed' | t }}`,
        countrySelectorSearchCount: `{{ 'localization.country_results_count' | t: count: '[count]' }}`,
      };

      {% comment %} POPUP JS CUSTOM CODE
      function openPopup() {
        var popup = document.getElementById('myPopup');
        popup.style.display = 'flex';
        setTimeout(function () {
          popup.style.opacity = '1';
        }, 10); // slight delay to ensure the display change is processed
      }
      function closePopup() {
        var popup = document.getElementById('myPopup');
        popup.style.opacity = '0';
        setTimeout(function () {
          popup.style.display = 'none';
        }, 250); // match the transition duration
      }
      function shouldShowPopup() {
        var lastShown = localStorage.getItem('popState');
        if (!lastShown) {
          return true; // Popup never shown
        }
        var lastShownDate = new Date(lastShown);
        var today = new Date();

        // Check if last shown date is not today
        console.log('last: ' + lastShownDate.toDateString() + ' | today: ' + today.toDateString());
        return lastShownDate.toDateString() !== today.toDateString();
      }

      window.addEventListener('scroll', function () {
        var scrollPosition = window.scrollY || document.documentElement.scrollTop;
        var triggerPoint = 800; // Modifier cette valeur pour définir la distance de défilement nécessaire

        if (shouldShowPopup() == false) {
          // Évite d'appeler en boucle
          console.log('Scroll listener removed');
          window.removeEventListener('scroll', arguments.callee);
        }

        if (scrollPosition > triggerPoint && shouldShowPopup()) {
          setTimeout(function () {
            openPopup();
            localStorage.setItem('popState', new Date().toISOString());
            // Supprimer l'écouteur de défilement après l'affichage de la popup
            window.removeEventListener('scroll', arguments.callee);
          }, 2000);
        }
      });

      document.addEventListener('DOMContentLoaded', function () {
        var closeBtn = document.querySelector('.close');
        closeBtn.addEventListener('click', function () {
          closePopup();
        });
      });
      {% endcomment %}
    </script>

    {%- if settings.predictive_search_enabled -%}
      <script src="{{ 'predictive-search.js' | asset_url }}" defer="defer"></script>
    {%- endif -%}

    {% comment %}------- CUSTOM CODE STARTING -------{% endcomment %}
    {% if template == 'index' %}
      <video autoplay muted loop playsinline id="background-video">
        <source src="https://cdn.shopify.com/videos/c/o/v/1379769e74454600ac00374cf57e0873.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video>
    {% endif %}
    {% comment %}------- CUSTOM CODE ENDING -------{% endcomment %}
     <script>
(function () {
  const SUPPRESS_MS = 3000;
  let suppressCartNav = false;

  // Expose une méthode pour activer le bouclier depuis tes autres scripts
  window.armCartRedirectShield = function(ms = SUPPRESS_MS){
    suppressCartNav = true;
    setTimeout(() => (suppressCartNav = false), ms);
  };

  const isCartUrl = (url) => {
    try { const u = new URL(url, location.origin); return /^\/cart(\/|$|\?|#)/i.test(u.pathname); }
    catch { return /\/cart(\/|$|\?|#)/i.test(String(url || "")); }
  };

  // Pendant que le bouclier est armé, on bloque toute nav vers /cart
  document.addEventListener('click', (e) => {
    if (!suppressCartNav) return;
    const a = e.target.closest?.('a[href]');
    if (a && isCartUrl(a.href)) { e.preventDefault(); e.stopImmediatePropagation(); }
  }, true);

  document.addEventListener('submit', (e) => {
    if (!suppressCartNav) return;
    const f = e.target.closest?.('form[action]');
    if (f && isCartUrl(f.action)) { e.preventDefault(); e.stopImmediatePropagation(); }
  }, true);
})();
</script>
<script>
(function(){
  /* ------------ Helpers ------------ */
  const nextTick = () => new Promise(r => requestAnimationFrame(() => setTimeout(r, 0)));

  // Throttle: max 1 (re)init toutes ~400ms
  let __swpTimer = null, __swpLast = 0;
  const MIN_GAP = 400, RUN_DELAY = 80;
  window.scheduleDrawerSwiperInit = function(delay){
    const now = Date.now();
    if (__swpTimer) return;
    const wait = Math.max(delay ?? RUN_DELAY, MIN_GAP - (now - __swpLast));
    __swpTimer = setTimeout(() => {
      __swpTimer = null; __swpLast = Date.now();
      window.ensureDrawerSwipers();
    }, wait);
  };

  // (Re)init sans boucle: si instance existe -> update, sinon -> new Swiper
  window.ensureDrawerSwipers = function () {
    if (!window.Swiper) return;

    // --- Upsell principal ---
    document.querySelectorAll('#CartDrawer .swiper-testmonials').forEach(el => {
      if (el.swiper) {
        try { el.swiper.update(); el.swiper.updateAutoHeight?.(200); } catch(e){}
        return;
      }
      const wrap = el.closest('.swiper-testmonials-wrapper-container') || el.parentElement || el;
      const prev = wrap.querySelector('.swiper-button-prev');
      const next = wrap.querySelector('.swiper-button-next');
      const pag  = wrap.querySelector('.swiper-pagination-testi');

      new Swiper(el, {
        slidesPerView: 1,
        spaceBetween: 10,
        observer: true,
        observeParents: true,
        watchOverflow: true,
        navigation: (prev && next) ? { prevEl: prev, nextEl: next } : undefined,
        pagination: pag ? { el: pag, clickable: true } : undefined,
        on: { init(){ setTimeout(() => el.swiper?.update(), 0); } }
      });
    });

    // --- Petit bandeau (.swiper5) ---
    document.querySelectorAll('#CartDrawer .swiper5').forEach(el => {
      if (el.swiper) { try { el.swiper.update(); } catch(e){} return; }
      const container = el.closest('.test1') || el.parentElement || el;
      const prev = container.querySelector('.swiper-button-prev');
      const next = container.querySelector('.swiper-button-next');

      new Swiper(el, {
        slidesPerView: 1,
        loop: true,
        autoplay: { delay: 3500, disableOnInteraction: false },
        observer: true,
        observeParents: true,
        navigation: (prev && next) ? { prevEl: prev, nextEl: next } : undefined
      });
    });
  };

  /* ------------ Drawer: open / refresh / upsell ATC ------------ */

  // Ouvrir le drawer
  window.openCartDrawerRobust = async function (){
    const el  = document.querySelector('cart-drawer');
    const box = document.getElementById('CartDrawer');
    try { el?.open?.(); } catch(_) {}
    if (box && !box.classList.contains('active')) box.classList.add('active');
    (el?.querySelector('[role="dialog"]') || box)?.focus?.();
    await nextTick();
    scheduleDrawerSwiperInit(80);
  };

 
  window.refreshCartDrawer = async function (){
    const drawer = document.querySelector('cart-drawer') || document.getElementById('CartDrawer');
    if (!drawer) return;

    let refreshed = false;

  
    if (typeof drawer.fetchCart === 'function') {
      try { drawer.fetchCart(); refreshed = true; } catch(_) {}
    }
  
    if (!refreshed && typeof drawer.renderContents === 'function') {
      try { await drawer.renderContents(); refreshed = true; } catch(_) {}
    }

    if (!refreshed) {
      try {
        const html = await fetch(`${location.pathname}?section_id=cart-drawer`, { headers:{Accept:'text/html'} }).then(r=>r.text());
        const tmp = document.createElement('div'); tmp.innerHTML = html;
        const fresh = tmp.querySelector('cart-drawer') || tmp.querySelector('#CartDrawer');
        if (fresh) { drawer.innerHTML = fresh.innerHTML; refreshed = true; }
      } catch(_) {}
    }

    requestAnimationFrame(() => scheduleDrawerSwiperInit(80));   // une passe, throttlée
    document.body.dispatchEvent(new CustomEvent('cart:updated', { bubbles:true, detail:{source:'manual-refresh'} }));
    window.armCartRedirectShield?.();
  };

  window.clicktoadd = async function(button, evt){
    evt?.preventDefault?.(); evt?.stopPropagation?.();

    const raw = button.getAttribute('dataid') || button.dataset.id || '';
    const variantId = (raw.match(/\d+/) || [])[0];
    if (!variantId) { console.error('❌ Variant ID introuvable'); return false; }

    button.classList.add('is-loading'); button.setAttribute('aria-busy','true');
    try {
      const res = await fetch('/cart/add.js', {
        method: 'POST',
        headers: {'Accept':'application/json','Content-Type':'application/json'},
        body: JSON.stringify({ id: Number(variantId), quantity: 1 })
      });
      if (!res.ok) throw new Error('Add to cart failed');

      await openCartDrawerRobust();
      await refreshCartDrawer();
      setTimeout(() => scheduleDrawerSwiperInit(120), 120);
    } catch (e) {
      console.error('[clicktoadd]', e);
    } finally {
      button.classList.remove('is-loading'); button.removeAttribute('aria-busy');
    }
    return false;
  };



  function bindForDrawer(drawer){
    if (!drawer) return;


    new MutationObserver(() => {
      if (drawer.classList.contains('active')) scheduleDrawerSwiperInit(60);
    }).observe(drawer, { attributes:true, attributeFilter:['class'] });


    const zones = [];
    const items = drawer.querySelector('#CartDrawer-CartItems'); if (items) zones.push(items);
    const ups1  = drawer.querySelector('#section-testmonials');  if (ups1)  zones.push(ups1);
    const ups2  = drawer.querySelector('.test1');                if (ups2)  zones.push(ups2);


    const needsInit = (zone) =>
      zone.querySelector('.swiper-testmonials:not(.swiper-initialized), .swiper5:not(.swiper-initialized)');

    zones.forEach(zone => {
      let deb;
      new MutationObserver(() => {
        clearTimeout(deb);
        deb = setTimeout(() => { if (needsInit(zone)) scheduleDrawerSwiperInit(80); }, 50);
      }).observe(zone, { childList:true, subtree:true });
    });

    drawer.addEventListener('click', (e) => {
      const hit = e.target.closest?.(
        'cart-remove-button, .cart-remove-button, [data-cart-remove],' +
        'button[name="remove"], button[name="minus"], button[name="plus"]'
      );
      if (hit) {
        scheduleDrawerSwiperInit(150);
        setTimeout(() => scheduleDrawerSwiperInit(300), 300);
      }
    }, true);

    drawer.addEventListener('change', (e) => {
      const el = e.target;
      if (el?.matches?.('input[name="updates[]"], .quantity__input')) {
        scheduleDrawerSwiperInit(150);
        setTimeout(() => scheduleDrawerSwiperInit(300), 300);
      }
    }, true);
  }

  
  const live = new MutationObserver(() => {
    const cur = document.getElementById('CartDrawer');
    if (cur && cur !== window.__drawerCurrentEl) {
      window.__drawerCurrentEl = cur;
      bindForDrawer(cur);
      scheduleDrawerSwiperInit(100);
    }
  });
  live.observe(document.body, { childList:true, subtree:true });

 
  const first = document.getElementById('CartDrawer');
  if (first) { window.__drawerCurrentEl = first; bindForDrawer(first); scheduleDrawerSwiperInit(100); }


  ['cart:updated','cart:change','line-item:change','line-item:remove'].forEach(evt => {
    document.body.addEventListener(evt, () => scheduleDrawerSwiperInit(120), true);
  });

  window.addEventListener('resize', () => scheduleDrawerSwiperInit(80));
})();
</script>

<script>
(function(){
 
  const ARM_MS = 3500;
  let shield = false;
  window.armCartRedirectShield = function(ms = ARM_MS){
    shield = true;
    setTimeout(()=> shield = false, ms);
  };
  const isCartUrl = (url) => {
    try { const u = new URL(url, location.origin); return /^\/cart(\/|$|\?|#)/i.test(u.pathname); }
    catch { return /\/cart(\/|$|\?|#)/i.test(String(url||'')); }
  };
  
  addEventListener('click', (e) => {
    if (!shield) return;
    const a = e.target.closest?.('a[href]');
    if (a && isCartUrl(a.href)) { e.preventDefault(); e.stopImmediatePropagation(); }
  }, true);

  addEventListener('submit', (e) => {
    if (!shield) return;
    const f = e.target.closest?.('form[action]');
    if (f && isCartUrl(f.action)) { e.preventDefault(); e.stopImmediatePropagation(); }
  }, true);

  async function openDrawerAndRefresh(){
    try { await (window.openCartDrawerRobust?.() ?? Promise.resolve()); } catch {}
    try { await (window.refreshCartDrawer?.() ?? Promise.resolve()); } catch {}

    setTimeout(() => { try { window.refreshCartDrawer?.(); } catch {} }, 120);
  }

  async function addToCartAjax(form){
    const fd = new FormData(form);
    const res = await fetch('/cart/add.js', {
      method: 'POST',
      headers: { 'Accept': 'application/json' },
      body: fd
    });
    if (!res.ok) throw new Error('Add to cart failed');

    await openDrawerAndRefresh();

    window.armCartRedirectShield?.(ARM_MS);
  }

  addEventListener('click', (e) => {
    const btn = e.target.closest?.('button[name="add"], .product-form__submit, [data-add-to-cart]');
    if (!btn) return;
    const form = btn.closest?.('form[action*="/cart/add"]');
    if (!form) return;
    e.preventDefault(); e.stopImmediatePropagation();
    addToCartAjax(form).catch(err => console.error('[ATC]', err));
  }, true);

  addEventListener('submit', (e) => {
    const form = e.target.closest?.('form[action*="/cart/add"]');
    if (!form) return;
    e.preventDefault(); e.stopImmediatePropagation();
    addToCartAjax(form).catch(err => console.error('[ATC submit]', err));
  }, true);

  if (!window.openCartDrawerRobust) {
    window.openCartDrawerRobust = async function(){
      const el  = document.querySelector('cart-drawer');
      const box = document.getElementById('CartDrawer');
      try { el?.open?.(); } catch {}
      if (box && !box.classList.contains('active')) box.classList.add('active');
      (el?.querySelector('[role="dialog"]') || box)?.focus?.();
      await new Promise(r => requestAnimationFrame(r));
    };
  }
})();
</script>
<script>
(function () {
  const wait = (ms)=>new Promise(r=>setTimeout(r,ms));

  async function getCartJson(){
    try {
      const r = await fetch('/cart.js?ts='+Date.now(), {
        headers:{Accept:'application/json'}, cache:'no-store'
      });
      return await r.json();
    } catch { return null; }
  }

  // Enlève toutes les marques "empty" et ré-affiche les items
  function clearEmptyState() {
    const root = document.querySelector('cart-drawer') || document.getElementById('CartDrawer');
    if (!root) return;

    const shells = new Set([
      root,
      root.closest?.('cart-drawer'),
      document.getElementById('CartDrawer'),
      ...root.querySelectorAll('.is-empty, .cart-drawer--is-empty')
    ].filter(Boolean));

    shells.forEach(el=>{
      el.classList?.remove('is-empty','cart-drawer--is-empty');
      el.removeAttribute?.('empty');
      if (el.dataset) delete el.dataset.empty;
    });

    // cacher l’empty-state et montrer le contenu
    root.querySelectorAll('#CartDrawer-Empty').forEach(n=>n.setAttribute('hidden','true'));
    root.querySelectorAll('.js-contents, #CartDrawer-CartItems, [data-render="items"]').forEach(n=>{
      if ('hidden' in n) n.hidden = false;
      n.removeAttribute?.('hidden');
      if (n.style && n.style.display === 'none') n.style.display = '';
    });
  }

  async function fixDrawerEmptyFlag() {
    const cart = await getCartJson();
    if (!cart || cart.item_count <= 0) return;

    // Demande à Dawn de rerender si dispo
    const comp = document.querySelector('cart-drawer');
    try { comp?.fetchCart?.(); } catch {}
    try { await comp?.renderContents?.(); } catch {}

    // Puis force visuellement l’état "non vide"
    clearEmptyState();

    // Certaines apps rejouent un render un peu plus tard — on repasse 2 fois
    setTimeout(clearEmptyState, 180);
    setTimeout(clearEmptyState, 600);
  }

  // Expose pour que tu puisses l’appeler où tu veux
  window.fixDrawerEmptyFlag = fixDrawerEmptyFlag;

  // Branches utiles : dès qu’on ouvre/MAJ le drawer on sécurise
  document.body.addEventListener('cart:added',  ()=> setTimeout(fixDrawerEmptyFlag, 80), true);
  document.body.addEventListener('cart:updated', ()=> setTimeout(fixDrawerEmptyFlag, 80), true);

  // Si ta shell reçoit la classe .active (ouverture) → sécurise
  const box = document.getElementById('CartDrawer');
  if (box) {
    new MutationObserver(() => {
      if (box.classList.contains('active')) setTimeout(fixDrawerEmptyFlag, 80);
    }).observe(box, { attributes:true, attributeFilter:['class'] });
  }
})();
</script>
<div class="klaviyo-modal" id="KlaviyoModal" aria-hidden="true">
  <div class="klaviyo-modal__overlay"></div>

  <div class="klaviyo-modal__content" role="dialog" aria-modal="true">
    <button class="klaviyo-modal__close" aria-label="Fermer">
      ✕
    </button>

    <div class="klaviyo-modal__inner">
      <div class="klaviyo-form-T4T8W4"></div>
    </div>
  </div>
</div>
  <script>
  document.addEventListener('DOMContentLoaded', () => {
    const openBtn = document.getElementById('OpenKlaviyoPopup');
    const modal = document.getElementById('KlaviyoModal');
    const closeBtn = modal.querySelector('.klaviyo-modal__close');
    const overlay = modal.querySelector('.klaviyo-modal__overlay');

    if (!openBtn || !modal) return;

    openBtn.addEventListener('click', () => {
      modal.classList.add('is-active');
      document.body.style.overflow = 'hidden';
    });

    const closeModal = () => {
      modal.classList.remove('is-active');
      document.body.style.overflow = '';
    };

    closeBtn.addEventListener('click', closeModal);
    overlay.addEventListener('click', closeModal);
  });
</script>

  </body>
</html>
